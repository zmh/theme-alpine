{{ define "main" }}
<article class="h-entry post" style="background: white; padding: 30px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
  <header style="margin-bottom: 30px;">
    {{ with .Title }}
    <h1 class="p-name" style="color: #1a365d; margin: 0 0 10px 0; font-size: 2em; line-height: 1.3;">{{ . }}</h1>
    {{ end }}
    <div class="post-meta" style="color: #666; font-size: 0.9em;">
      <time class="dt-published" datetime="{{ .Date.Format "2006-01-02 15:04:05 -0700" }}">
        <a class="u-url dates" href="{{ .Permalink }}" style="color: #2c5282; text-decoration: none;">{{ .Date.Format "Jan 2, 2006" }}</a>
      </time>
      {{ with .Params.categories }}
      <span style="margin: 0 10px;">â€¢</span>
      <span>
        {{ range . }}
        <a href="/categories/{{ . | urlize }}" style="color: #2c5282; text-decoration: none;">{{ . }}</a>
        {{ end }}
      </span>
      {{ end }}
    </div>
  </header>

  <section class="e-content post-body" style="line-height: 1.6; color: #2d3748;">
    {{ .Content }}
  </section>

  {{ if .Params.bluesky }}
    <a class="u-syndication" {{ printf "href=%q" .Params.bluesky.url | safeHTMLAttr }} style="display: none;">Also on Bluesky</a>
  {{ end }}
  
  {{ if .Site.Params.include_conversation }}
  <script type="text/javascript" src="https://micro.blog/conversation.js?url={{ .Permalink }}"></script>
  {{ end }}

  <section id="post-meta" class="clearfix p-author h-card" style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #e2e8f0;">
    <a href="/" class="u-url" style="text-decoration: none; display: flex; align-items: center; gap: 15px;">
      {{ if .Params.author }}
      <img class="u-photo avatar" src="{{ .Params.author.avatar }}" width="64" height="64" style="border-radius: 50%;">
      <div>
        <span class="p-name dark" style="display: block; color: #2d3748; font-weight: 500;">{{ .Params.author.name }}</span>
        <span><a href="https://micro.blog/{{ .Params.author.username }}" style="color: #2c5282; text-decoration: none;">@{{ .Params.author.username }}</a></span>
      </div>
      {{ else }}
      <img class="u-photo avatar" src="{{ .Site.Author.avatar }}" width="64" height="64" style="border-radius: 50%;">
      <div>
        <span class="p-name dark" style="display: block; color: #2d3748; font-weight: 500;">{{ .Site.Author.name }}</span>
        <span><a href="https://micro.blog/{{ .Site.Author.username }}" style="color: #2c5282; text-decoration: none;">@{{ .Site.Author.username }}</a></span>
      </div>
      {{ end }}
    </a>
  </section>
</article>
{{ end }}
